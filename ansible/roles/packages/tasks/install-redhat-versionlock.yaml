---
- name: add versionlock for containerd
  command: yum versionlock add containerd.io
  args:
    warn: false
  register: command_result
  changed_when: 'command_result.stdout is regex(".*versionlock added: [1-9]+.*")'

- name: add versionlock for kubelet and kubectl packages
  command: yum versionlock add {{ item }}
  with_items:
    - kubelet
    - kubectl
  args:
    warn: false
  register: command_result
  changed_when: 'command_result.stdout is regex(".*versionlock added: [1-9]+.*")'

- name: add versionlock for kubeadm package
  command: yum versionlock add kubeadm
  args:
    warn: false
  register: command_result
  changed_when: 'command_result.stdout is regex(".*versionlock added: [1-9]+.*")'
